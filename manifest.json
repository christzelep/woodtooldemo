let deferredPrompt;
const installBtn = document.getElementById('installBtn');

window.addEventListener('beforeinstallprompt', (e) => {
  e.preventDefault(); // Αποτρέπει το αυτόματο popup
  deferredPrompt = e; // Αποθηκεύουμε το event για μετέπειτα χρήση
  installBtn.style.display = 'block'; // Εμφάνιση του κουμπιού
});

installBtn.addEventListener('click', async () => {
  if (!deferredPrompt) {
    return;
  }
  deferredPrompt.prompt(); // Εμφάνιση του διαλόγου εγκατάστασης
  const { outcome } = await deferredPrompt.userChoice;
  if (outcome === 'accepted') {
    console.log('User accepted the install prompt');
  } else {
    console.log('User dismissed the install prompt');
  }
  deferredPrompt = null; // Μηδενίζουμε το event
  installBtn.style.display = 'none'; // Κρύβουμε το κουμπί μετά
});
